<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.png">

    <link href="//cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet" />
    <link href="./css/index.css" rel="stylesheet" />

    <script src="//cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/nedb/1.8.0/nedb.min.js"></script>
    <script src="./js/knockout.mapping.js" type="text/javascript"></script>

    <title>Inverter Status</title>
</head>
<body id="content">
    <div class="container-fluid text-center">
        <div class="row shadow p-2 mb-2 bg-white rounded">
            <div class="col">
                <span class="fa-stack">
                    <i class="fa-solid fa-square fa-stack-2x"></i>
                    <i class="fa fa-solar-panel fa-stack-1x fa-inverse"></i>
                </span>
            </div>
            <div class="col">PV Generation</div>
            <div class="col"><span data-bind="text: `${pv()} W`"></span></div>
        </div>
        <div class="row shadow p-2 mb-2 bg-white rounded">
            <div class="col">
                <span class="fa-stack">
                    <i class="fa-solid fa-square fa-stack-2x"></i>
                    <i class="fa fa-house fa-stack-1x fa-inverse"></i>
                </span>
            </div>
            <div class="col">House Consumption</div>
            <div class="col"><span data-bind="text: `${houseConsumption()} W`"></span></div>
        </div>
        <div class="row shadow p-2 mb-2 bg-white rounded">
            <div class="col">
                <span class="fa-stack">
                    <i class="fa-solid fa-square fa-stack-2x"></i>
                    <i data-bind="class: batteryModeIcon()" class="fa fa-car-battery fa-stack-1x fa-inverse"></i>
                </span>
            </div>
            <div class="col">Battery Power</div>
            <div class="col"><span data-bind="text: `${batteryP()} W [${batteryModeLabel()}]`"></span></div>
        </div>
        <div class="row shadow p-2 mb-2 bg-white rounded">
            <div class="col">
                <span class="fa-stack">
                    <i class="fa-solid fa-square fa-stack-2x"></i>
                    <i data-bind="class: gridStatusIcon()" class="fa fa-stack-1x fa-inverse"></i>
                </span>
            </div>
            <div class="col">Grid Power</div>
            <div class="col"><span data-bind="text: `${gridP()}W [${gridInOutModeLabel()}]`"></span></div>
        </div>
        <div class="row shadow p-2 mb-2 bg-white rounded">
            <div class="col">
                <span class="fa-stack">
                    <i class="fa-solid fa-square fa-stack-2x"></i>
                    <i data-bind="class: batterySOCIcon()" class="fa fa-stack-1x fa-inverse"></i>
                </span>
            </div>
            <div class="col">Battery SOC</div>
            <div class="col"><span data-bind="text: `${batterySOC()} %`"></span></div>
        </div>
        <div class="row shadow p-2 mb-2 bg-white rounded">
            <div class="col">
                <span class="fa-stack">
                    <i class="fa-solid fa-square fa-stack-2x"></i>
                    <i data-bind="class: batterySOH() < 70 ? 'red' : ''" class="fa fa-stack-1x fa-inverse fa-heart-pulse"></i>
                </span>
            </div>
            <div class="col">Battery SOH</div>
            <div class="col"><span data-bind="text: `${batterySOH()} %`"></span></div>
        </div>
        <div class="row shadow p-2 mb-2 bg-white rounded">
            <div class="col">
                <span class="fa-stack">
                    <i class="fa-solid fa-square fa-stack-2x"></i>
                    <i class="fa fa-temperature-half fa-stack-1x fa-inverse"></i>
                </span>
            </div>
            <div class="col">Battery Temperature</div>
            <div class="col"><span data-bind="text: `${batteryTemperature()}ยบ C`"></span></div>
        </div>
        <div class="row shadow p-2 mb-2 bg-white rounded">
            <div class="col">
                <span class="fa-stack">
                    <i class="fa-solid fa-square fa-stack-2x"></i>
                    <i class="fa fa-temperature-half fa-stack-1x fa-inverse"></i>
                </span>
            </div>
            <div class="col">Inverter Temperature</div>
            <div class="col"><span data-bind="text: `${inverterTemperature()}ยบ C`"></span></div>
        </div>
        <div class="row shadow p-2 mb-2 bg-white rounded">
            <div class="col">
                <span class="fa-stack">
                    <i class="fa-solid fa-square fa-stack-2x"></i>
                    <i class="fa fa-stack-1x fa-inverse fa-gauge-simple-high"></i>
                </span>
            </div>
            <div class="col">Today's PV Generation</div>
            <div class="col"><span data-bind="text: `${todaysPVGeneration()} kWh`"></span></div>
        </div>
    </div>
    <script src="./js/index.js" type="text/javascript"></script>
</body>
</html>